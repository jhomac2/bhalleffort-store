<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rifas ‚Äì BHALLEFFORT</title>
  <meta name="description" content="Participa en nuestras rifas mensuales. ¬°Gana incre√≠bles premios! Tienda online en Ecuador.">
  <link rel="icon" href="https://jhomac2.github.io/bhalleffort-store/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --morado: #4c0d8c;
      --moradoLuz: #6a1bbd;
      --celeste: #87ceeb;
      --turquesa: #00c8c8;
      --turquesaOsc: #009e9e;
      --naranja: #ff6600;
      --texto: #222;
      --fondo: #f5f7fa;
      --blanco: #ffffff;
      --shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
    body { background: var(--fondo); color: var(--texto); line-height: 1.6; padding-bottom: 100px; }
    a { text-decoration: none; color: inherit; transition: 0.3s; }
    img { max-width: 100%; display: block; }
    .container { width: 90%; max-width: 1200px; margin: auto; }

    /* TOP BAR */
    .top-bar { background: var(--morado); color: #fff; font-size: 13px; padding: 8px 0; }
    .top-bar .flex-space { display: flex; justify-content: space-between; align-items: center; }
    .social-icons { display: flex; gap: 15px; font-size: 16px; }

    /* HEADER */
    .main-header { background: var(--blanco); padding: 15px 0; box-shadow: var(--shadow); position: relative; z-index: 1001; }
    .logo-section { display: flex; align-items: center; gap: 15px; }
    .whale-icon { width: 55px; height: 55px; border: 2px solid var(--morado); border-radius: 50%; padding: 5px; }
    .brand-text h1 { font-size: 24px; color: var(--morado); line-height: 1; }
    .brand-text p { font-size: 12px; color: var(--morado); font-weight: 300; }
    .dual-buttons { display: flex; gap: 15px; }
    .btn-rifas { background: var(--naranja); color: #fff; padding: 10px 20px; border-radius: 8px; font-weight: 700; }
    .btn-wa { background: #25d366; color: #fff; padding: 10px 20px; border-radius: 8px; font-weight: 700; }

    /* NAV */
    .main-nav { background: var(--blanco); position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    .main-nav ul { display: flex; justify-content: center; flex-wrap: wrap; list-style: none; }
    .main-nav a { padding: 15px 20px; display: block; font-weight: 600; color: var(--morado); font-size: 14px; text-transform: uppercase; }
    .main-nav a.active { background: var(--morado); color: #fff; }

    /* HERO */
    .hero-banner { background: linear-gradient(135deg, var(--morado), var(--moradoLuz)); color: #fff; padding: 60px 20px; text-align: center; }
    .hero-banner h2 { font-size: 32px; margin-bottom: 10px; }

    /* GRID */
    .featured-rifas { padding: 50px 0; }
    .section-title { text-align: center; margin-bottom: 40px; color: var(--morado); }
    .section-title h2 { font-size: 28px; border-bottom: 4px solid var(--turquesa); display: inline-block; padding-bottom: 5px; }
    .rifas-grid { display: grid; gap: 25px; grid-template-columns: repeat(4, 1fr); }
    .rifa-card { background: var(--blanco); border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.08); transition: 0.4s; text-align: center; }
    .rifa-card:hover { transform: translateY(-10px); }
    .rifa-image-container { width: 100%; height: 230px; overflow: hidden; }
    .rifa-image { width: 100%; height: 100%; object-fit: cover; transition: 0.6s; }
    .rifa-info { padding: 20px; }
    .rifa-name { font-weight: 600; font-size: 16px; color: var(--morado); margin-bottom: 10px; min-height: 45px; }
    .rifa-price { font-size: 22px; font-weight: 700; color: var(--turquesa); margin-bottom: 15px; }
    .btn-participar { background: var(--morado); color: #fff; border: none; padding: 12px; border-radius: 8px; font-weight: 700; cursor: pointer; width: 100%; }

    /* FOOTER */
    footer { background: var(--celeste); color: #222; padding: 50px 0 20px; }
    .footer-grid { display: grid; grid-template-columns: 1.5fr 1fr 1fr; gap: 40px; }

    /* CARRITO Y BANNERS */
    #cart-icon { position: fixed; top: 20px; right: 20px; background: var(--blanco); width: 55px; height: 55px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.2); cursor: pointer; z-index: 2000; }
    #cart-badge { position: absolute; top: -5px; right: -5px; background: var(--turquesa); color: #fff; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; }
    
    #banner-div { position: fixed; bottom: 0; left: 0; right: 0; display: flex; z-index: 1999; }
    #banner-envio, #banner-sorteo { flex: 1; padding: 12px; text-align: center; font-weight: 700; font-size: 13px; color: #fff; }
    #banner-envio { background: var(--naranja); }
    #banner-sorteo { background: var(--morado); }

    /* MODAL */
    .cart-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 3000; backdrop-filter: blur(5px); }
    .cart-content { background: #fff; width: 95%; max-width: 450px; margin: 50px auto; border-radius: 20px; padding: 25px; }
    .btn-checkout { background: #25d366; color: #fff; width: 100%; padding: 15px; border-radius: 10px; font-weight: 700; border: none; cursor: pointer; }

    @media (max-width: 1024px) { .rifas-grid { grid-template-columns: repeat(3, 1fr); } }
    @media (max-width: 768px) { .rifas-grid { grid-template-columns: repeat(2, 1fr); } .dual-buttons { display: none; } }
    @media (max-width: 480px) { .rifas-grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>

  <div id="cart-icon" style="display:none;">
    <i class="fas fa-shopping-cart fa-lg"></i>
    <span id="cart-badge">0</span>
  </div>

  <div id="banner-div">
    <div id="banner-envio">üöö Env√≠o gratis desde $50 en productos</div>
    <div id="banner-sorteo">üéâ Compra $30 en productos y participa en la rifa</div>
  </div>

  <div class="top-bar">
    <div class="container flex-space">
      <div class="social-icons">
        <a href="#"><i class="fab fa-tiktok"></i></a>
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
      </div>
      <div><i class="fas fa-truck"></i> ENV√çOS 100% SEGUROS A TODO ECUADOR</div>
    </div>
  </div>

  <header class="main-header">
    <div class="container flex-space">
      <a href="index.html" class="logo-section">
        <img src="logo-ballena.png" alt="BHALLEFFORT" class="whale-icon">
        <div class="brand-text">
          <h1>BHALLEFFORT</h1>
          <p>La mejor calidad al mejor precio</p>
        </div>
      </a>
      <div class="dual-buttons">
        <a href="super-rifas.html" class="btn-rifas"><i class="fas fa-ticket-alt"></i> RIFAS</a>
        <a href="https://wa.me/593963923399" class="btn-wa"><i class="fab fa-whatsapp"></i> +593 963 923 399</a>
      </div>
    </div>
  </header>

  <nav class="main-nav">
    <ul>
      <li><a href="index.html">Inicio</a></li>
      <li><a href="ropa.html">Ropa</a></li>
      <li><a href="zapatos.html">Zapatos</a></li>
      <li><a href="varios.html">Varios</a></li>
      <li><a href="promociones.html">Promociones</a></li>
      <li><a href="contacto.html">Contacto</a></li>
    </ul>
  </nav>

  <section class="hero-banner">
    <h2>üéÅ ¬°ZONA DE RIFAS Y PREMIOS!</h2>
    <p>Adquiere tus boletos y gana incre√≠bles premios con BHALLEFFORT.</p>
  </section>

  <section class="featured-rifas">
    <div class="container">
      <div class="section-title"><h2>RIFAS VIGENTES</h2></div>
      <div class="rifas-grid" id="rifas-grid"></div>
    </div>
  </section>

  <footer>
    <div class="container footer-grid">
      <div>
        <h3>BHALLEFFORT</h3>
        <p>Tu tienda de confianza en Ecuador.</p>
        <p style="font-style: italic; margin-top:10px;">"Dios te da m√°s de lo que pides"</p>
      </div>
      <div>
        <h3>LEGAL</h3>
        <p><a href="politicas.html">T√©rminos y Condiciones</a></p>
        <p><a href="politicas.html">Pol√≠ticas de Env√≠o</a></p>
      </div>
    </div>
  </footer>

  <div id="cart-modal" class="cart-modal">
    <div class="cart-content">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3>Mis Boletos</h3>
        <button id="close-cart" style="font-size:25px; border:none; background:none; cursor:pointer;">&times;</button>
      </div>
      <div id="cart-items" style="margin: 15px 0; max-height: 300px; overflow-y: auto;"></div>
      <div style="display:flex; justify-content:space-between; font-weight:700; font-size:20px; margin-bottom:15px; border-top: 1px solid #eee; padding-top: 10px;">
        <span>Total:</span><span id="cart-total">$0.00</span>
      </div>
      <button id="btn-wa-final" class="btn-checkout"><i class="fab fa-whatsapp"></i> SOLICITAR BOLETOS</button>
    </div>
  </div>

  <script>
    let carrito = JSON.parse(localStorage.getItem('bh-cart')) || [];

    async function cargarRifas() {
      try {
        const res = await fetch('productos.json');
        const data = await res.json();
        const rifas = data.filter(p => p.cat === "Rifas");
        const grid = document.getElementById('rifas-grid');
        grid.innerHTML = rifas.map(r => `
          <div class="rifa-card">
            <div class="rifa-image-container"><img src="${r.img}" class="rifa-image"></div>
            <div class="rifa-info">
              <div class="rifa-name">${r.nombre}</div>
              <div class="rifa-price">$${r.precio.toFixed(2)}</div>
              <button class="btn-participar" onclick="agregar('${r.id}','${r.nombre}',${r.precio},'rifa')">COMPRAR BOLETO</button>
            </div>
          </div>
        `).join('');
      } catch (e) { console.log(e); }
    }

    function agregar(id, nombre, precio, tipo) {
      carrito.push({id, nombre, precio, tipo});
      localStorage.setItem('bh-cart', JSON.stringify(carrito));
      actualizarUI();
    }

    function actualizarUI() {
      document.getElementById('cart-badge').textContent = carrito.length;
      document.getElementById('cart-icon').style.display = carrito.length > 0 ? 'flex' : 'none';
      
      const subProd = carrito.filter(i => i.tipo !== 'rifa').reduce((s, i) => s + i.precio, 0);
      document.getElementById('banner-envio').style.background = subProd >= 50 ? "#25D366" : "var(--naranja)";
      document.getElementById('banner-sorteo').style.background = subProd >= 30 ? "#25D366" : "var(--morado)";
    }

    function mostrarCarrito() {
      const itemsDiv = document.getElementById('cart-items');
      const total = carrito.reduce((s, i) => s + i.precio, 0);
      
      document.getElementById('cart-total').textContent = `$${total.toFixed(2)}`;
      itemsDiv.innerHTML = carrito.map((item, i) => `
        <div style="display:flex; justify-content:space-between; padding:10px 0; border-bottom:1px solid #eee;">
          <span>${item.nombre} <br><b>$${item.precio.toFixed(2)}</b></span>
          <button onclick="borrar(${i})" style="color:red; border:none; background:none; cursor:pointer;"><i class="fas fa-trash"></i></button>
        </div>
      `).join('');
      document.getElementById('cart-modal').style.display = 'block';
    }

    function borrar(i) {
      carrito.splice(i, 1);
      localStorage.setItem('bh-cart', JSON.stringify(carrito));
      actualizarUI();
      mostrarCarrito();
    }

    document.getElementById('btn-wa-final').onclick = () => {
      const total = carrito.reduce((s, i) => s + i.precio, 0);
      let msg = `üéüÔ∏è *¬°PARTICIPACI√ìN REGISTRADA - BHALLEFFORT!* üéüÔ∏è\n\n`;
      msg += `He seleccionado los siguientes boletos:\n`;
      carrito.forEach((i, idx) => msg += `üîπ *${i.nombre}* ($${i.precio.toFixed(2)})\n`);
      msg += `\nüíµ *TOTAL A PAGAR:* *$${total.toFixed(2)}*\n`;
      msg += `\n--------------------------------------\n`;
      msg += `üìå *POR FAVOR:* \n`;
      msg += `1. Env√≠enme el n√∫mero de *CUENTA BANCARIA*.\n`;
      msg += `2. Conf√≠rmenme mis *N√öMEROS DE LA SUERTE*. üçÄ\n`;
      msg += `--------------------------------------\n`;
      msg += `_¬°Espero ganar con Bhalleffort!_ üêã‚ú®`;
      window.open(`https://wa.me/593963923399?text=${encodeURIComponent(msg)}`);
    };

    document.getElementById('cart-icon').onclick = mostrarCarrito;
    document.getElementById('close-cart').onclick = () => document.getElementById('cart-modal').style.display = 'none';
    cargarRifas();
    actualizarUI();
  </script>
</body>
</html>
