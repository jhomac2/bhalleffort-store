<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>ZAPATOS | BHALLEFFORT</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="https://jhomac2.github.io/bhalleffort-store/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--celeste:#87ceeb;--morado:#4c0d8c;--turquesa:#00c8c8;--texto:#222;--fondo:#f5f7fa}
    *{box-sizing:border-box;margin:0;padding:0;font-family:'Poppins',sans-serif}
    body{background:var(--fondo);color:var(--texto)}
    img{max-width:100%;display:block}
    .container{width:90%;max-width:1200px;margin:auto}
    .flex-space{display:flex;align-items:center;justify-content:space-between}

    /* Top Bar & Header */
    .top-bar{background:var(--morado);color:#fff;font-size:14px;padding:8px 0}
    .main-header{padding:15px 0;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,.1)}
    .logo-section{display:flex;align-items:center;gap:15px}
    .whale-icon{width:50px;border:2px solid var(--morado);border-radius:50%}
    .brand-text h1{font-size:24px;color:var(--morado);line-height:1}
    
    /* Botones WhatsApp y Rifas */
    .dual-buttons{display:flex;gap:1rem;justify-content:center;margin:1rem 0}
    .btn-rifas{background:#ff6600;padding:.8rem 1.5rem;border-radius:8px;font-weight:700;text-decoration:none;color:#fff}
    .btn-wa{background:#25d366;padding:.8rem 1.5rem;border-radius:8px;font-weight:700;text-decoration:none;color:#fff}

    /* Nav */
    .main-nav{position:sticky;top:0;z-index:999;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,.1)}
    .main-nav ul{list-style:none;display:flex;justify-content:center;flex-wrap:wrap}
    .main-nav a{color:var(--morado);padding:15px 20px;display:block;text-decoration:none;font-weight:600;font-size:16px}
    .main-nav a.active{background:var(--morado);color:#fff}

    /* Hero */
    .hero-category {
      background: linear-gradient(rgba(76,13,140,0.7), rgba(76,13,140,0.7)), url('https://images.unsplash.com/photo-1549298916-b41d501d3772?auto=format&fit=crop&q=80&w=1200');
      background-size: cover; background-position: center;
      height: 250px; display: flex; align-items: center; justify-content: center; color: #fff; text-align: center;
    }
    .hero-category h1 { font-size: 40px; text-transform: uppercase; }

    /* Grid de Productos - Igual a Ropa */
    .products-grid {
      display: grid; gap: 20px; padding: 40px 0;
      grid-template-columns: repeat(4, 1fr);
    }
    .product-card { background: #fff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.1); transition: 0.3s; position: relative; }
    .product-card:hover { transform: translateY(-5px); }
    
    /* Efecto Cambio de Imagen */
    .img-container { position: relative; width: 100%; height: 280px; overflow: hidden; }
    .img-container img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
    .img-back { position: absolute; top: 0; left: 0; opacity: 0; }
    .product-card:hover .img-back { opacity: 1; }
    .product-card:hover .img-front { opacity: 0; }

    .product-info { padding: 15px; text-align: center; }
    .product-name { font-size: 18px; font-weight: 700; margin-bottom: 8px; color: #333; }
    .product-price { font-size: 22px; color: var(--turquesa); font-weight: 700; margin-bottom: 12px; }
    .btn-add { background: var(--turquesa); color: #fff; border: none; width: 100%; padding: 12px; border-radius: 8px; font-weight: 700; cursor: pointer; transition: 0.3s; }
    .btn-add:hover { background: #00aaaa; }

    /* Responsive */
    @media (max-width: 992px) { .products-grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 480px) { .products-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; } .product-name { font-size: 15px; } .hero-category h1 { font-size: 28px; } }

    /* Carrito & Buscador (Funcionalidades) */
    #cart-icon { position: fixed; top: 20px; right: 20px; background: #fff; width: 55px; height: 55px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(0,0,0,0.2); cursor: pointer; z-index: 1001; }
    #cart-badge { position: absolute; top: 0; right: 0; background: var(--turquesa); color: #fff; font-size: 12px; padding: 4px 8px; border-radius: 50%; }
    #btn-search { position: fixed; top: 85px; right: 20px; background: var(--turquesa); color: #fff; width: 55px; height: 55px; border-radius: 50%; border: none; font-size: 20px; cursor: pointer; z-index: 1001; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
    
    .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 2000; }
    .modal-content { background: #fff; width: 90%; max-width: 500px; margin: 50px auto; padding: 20px; border-radius: 12px; position: relative; }
    #cart-items { max-height: 300px; overflow-y: auto; margin: 15px 0; }
    .cart-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee; }
    
    #noti { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); background: #333; color: #fff; padding: 10px 20px; border-radius: 30px; display: none; z-index: 9999; }
    #bottom-banners { position: fixed; bottom: 0; width: 100%; display: flex; z-index: 1000; }
    .banner { flex: 1; padding: 10px; text-align: center; color: #fff; font-weight: 700; font-size: 14px; }
  </style>
</head>
<body>

  <div id="cart-icon"><i class="fas fa-shopping-cart"></i><span id="cart-badge">0</span></div>
  <button id="btn-search"><i class="fas fa-search"></i></button>
  <div id="noti">Producto a√±adido</div>

  <div id="bottom-banners">
    <div class="banner" id="b-envio" style="background: #ff9800;">üöö Env√≠o gratis +$50</div>
    <div class="banner" id="b-rifa" style="background: var(--morado);">üéüÔ∏è Rifa por compras +$30</div>
  </div>

  <header class="main-header">
    <div class="container flex-space">
      <div class="logo-section">
        <img src="logo-ballena.png" class="whale-icon" alt="Logo">
        <div class="brand-text">
          <h1>BHALLEFFORT</h1>
          <p>Calidad al mejor precio</p>
        </div>
      </div>
      <div class="dual-buttons">
        <a href="super-rifas.html" class="btn-rifas">RIFAS</a>
        <a href="https://wa.me/593963923399" class="btn-wa"><i class="fab fa-whatsapp"></i> Chat</a>
      </div>
    </div>
  </header>

  <nav class="main-nav">
    <ul>
      <li><a href="index.html">INICIO</a></li>
      <li><a href="ropa.html">ROPA</a></li>
      <li><a href="zapatos.html" class="active">ZAPATOS</a></li>
      <li><a href="varios.html">VARIOS</a></li>
      <li><a href="promociones.html">PROMOS</a></li>
    </ul>
  </nav>

  <section class="hero-category">
    <h1>Colecci√≥n Zapatos</h1>
  </section>

  <main class="container">
    <div class="products-grid" id="grid-zapatos">
      </div>
  </main>

  <div id="modal-cart" class="modal">
    <div class="modal-content">
      <h2>Tu Carrito</h2>
      <div id="cart-items"></div>
      <div style="font-size: 20px; font-weight: 700; margin: 15px 0;">Total: <span id="total-price">$0.00</span></div>
      <button id="btn-checkout" style="background:#25d366; color:#fff; width:100%; padding:15px; border:none; border-radius:8px; font-weight:700; cursor:pointer;">PEDIR POR WHATSAPP üêã</button>
      <button onclick="closeModals()" style="width:100%; background:none; border:none; margin-top:10px; cursor:pointer;">Cerrar</button>
    </div>
  </div>

  <script>
    let productos = [];
    let carrito = JSON.parse(localStorage.getItem('bh-cart')) || [];

    async function cargar() {
      const res = await fetch('productos.json');
      productos = await res.json();
      render();
      updateCartUI();
    }

    function render() {
      const grid = document.getElementById('grid-zapatos');
      const zapatos = productos.filter(p => p.cat.toUpperCase() === "ZAPATOS");
      grid.innerHTML = zapatos.map(p => `
        <div class="product-card">
          <div class="img-container">
            <img src="${p.imgFrontal}" class="img-front">
            <img src="${p.imgTrasera || p.imgFrontal}" class="img-back">
          </div>
          <div class="product-info">
            <div class="product-name">${p.nombre}</div>
            <div class="product-price">$${p.precio.toFixed(2)}</div>
            <button class="btn-add" onclick="addToCart('${p.id}')">A√±adir al Carrito</button>
          </div>
        </div>
      `).join('');
    }

    function addToCart(id) {
      const p = productos.find(x => x.id == id);
      carrito.push(p);
      localStorage.setItem('bh-cart', JSON.stringify(carrito));
      updateCartUI();
      showNoti(`‚úÖ ${p.nombre} a√±adido`);
    }

    function updateCartUI() {
      document.getElementById('cart-badge').innerText = carrito.length;
      const subtotal = carrito.reduce((acc, p) => acc + p.precio, 0);
      document.getElementById('b-envio').style.background = subtotal >= 50 ? "#25d366" : "#ff9800";
      document.getElementById('b-rifa').style.background = subtotal >= 30 ? "#25d366" : "#4c0d8c";
    }

    function showNoti(m) {
      const n = document.getElementById('noti');
      n.innerText = m; n.style.display = 'block';
      setTimeout(() => n.style.display = 'none', 2000);
    }

    function openCart() {
      const list = document.getElementById('cart-items');
      const subtotal = carrito.reduce((acc, p) => acc + p.precio, 0);
      const envio = (subtotal > 0 && subtotal < 50) ? 3.50 : 0;
      
      list.innerHTML = carrito.map((p, i) => `
        <div class="cart-item">
          <span>${p.nombre}</span>
          <span>$${p.precio.toFixed(2)} <i class="fas fa-trash" onclick="remove(${i})" style="color:red; cursor:pointer; margin-left:10px;"></i></span>
        </div>
      `).join('');
      
      document.getElementById('total-price').innerText = `$${(subtotal + envio).toFixed(2)}`;
      document.getElementById('modal-cart').style.display = 'block';
    }

    function remove(i) {
      carrito.splice(i, 1);
      localStorage.setItem('bh-cart', JSON.stringify(carrito));
      updateCartUI();
      openCart();
    }

    function closeModals() { document.querySelectorAll('.modal').forEach(m => m.style.display = 'none'); }

    document.getElementById('cart-icon').onclick = openCart;
    document.getElementById('btn-checkout').onclick = () => {
      if(carrito.length === 0) return;
      const subtotal = carrito.reduce((acc, p) => acc + p.precio, 0);
      let msg = `üêã *NUEVO PEDIDO ZAPATOS*\n\n`;
      carrito.forEach(p => msg += `- ${p.nombre} ($${p.precio})\n`);
      msg += `\n*Total:* $${subtotal.toFixed(2)}`;
      window.open(`https://wa.me/593963923399?text=${encodeURIComponent(msg)}`);
    };

    cargar();
  </script>
</body>
</html>
